
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Installation &#8212; connectal 20.05.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/tracking.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Connectal Design" href="design/design.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="bsv-pkgindex.html" title="Bsv Package Index"
             >bsvpkgs</a> |</li>
        <li class="right" >
          <a href="design/design.html" title="Connectal Design"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">connectal 20.05.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-connectal-from-packages">
<h2>Installing Connectal from Packages<a class="headerlink" href="#installing-connectal-from-packages" title="Permalink to this headline">¶</a></h2>
<p>On Ubuntu systems, connectal may be installed from pre-built packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="o">-</span><span class="n">y</span> <span class="n">ppa</span><span class="p">:</span><span class="n">jamey</span><span class="o">-</span><span class="n">hicks</span><span class="o">/</span><span class="n">connectal</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">connectal</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-connectal-from-source">
<h2>Installing Connectal from Source<a class="headerlink" href="#installing-connectal-from-source" title="Permalink to this headline">¶</a></h2>
<p>Connectal source comes from three repositories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cambridgehackers</span><span class="o">/</span><span class="n">connectal</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cambridgehackers</span><span class="o">/</span><span class="n">fpgamake</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cambridgehackers</span><span class="o">/</span><span class="n">buildcache</span>
</pre></div>
</div>
<p>To use Connectal to build hardware/software applications, some additional packages are required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">connectal</span><span class="p">;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span><span class="o">-</span><span class="n">dependences</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-connectal-and-bluespec-on-centos-7">
<h2>Installing Connectal and Bluespec on CentOS 7<a class="headerlink" href="#installing-connectal-and-bluespec-on-centos-7" title="Permalink to this headline">¶</a></h2>
<p>The following dependencies were needed on CentOS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">gmp</span> <span class="n">glibc</span><span class="o">-</span><span class="n">devel</span> <span class="n">autoconf</span> <span class="n">gperf</span> <span class="n">compat</span><span class="o">-</span><span class="n">libstdc</span><span class="o">++-</span><span class="mi">33</span>
</pre></div>
</div>
<p>CentOS does not have an iverilog packages, but it can be build from
source, following the instructions in its repository:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/steveicarus/iverilog.git">https://github.com/steveicarus/iverilog.git</a></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="installing-connectal-drivers-and-pci-express-utilities">
<h2>Installing Connectal Drivers and PCI Express Utilities:<a class="headerlink" href="#installing-connectal-drivers-and-pci-express-utilities" title="Permalink to this headline">¶</a></h2>
<p>To run Connectal applications on FPGAs attached via PCI Express, a
couple of device drivers have to be built and installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">connectal</span><span class="p">;</span> <span class="n">make</span> <span class="nb">all</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>In addition, you will need to build and install fpgajtag and pciescan:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cambridgehackers</span><span class="o">/</span><span class="n">pciescan</span>
<span class="p">(</span><span class="n">cd</span> <span class="n">pciescan</span><span class="p">;</span> <span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span><span class="p">)</span>

<span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cambridgehackers</span><span class="o">/</span><span class="n">fpgajtag</span>
<span class="p">(</span><span class="n">cd</span> <span class="n">fpgajtag</span><span class="p">;</span> <span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-vivado">
<h2>Installing Vivado<a class="headerlink" href="#installing-vivado" title="Permalink to this headline">¶</a></h2>
<p>Download Vivado from Xilinx:</p>
<blockquote>
<div><p><a class="reference external" href="http://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/2015-4.html">http://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/2015-4.html</a></p>
</div></blockquote>
<p>Connectal builds do not use the Vivado SDK.</p>
</div>
<div class="section" id="installing-ubuntu-on-zynq-zedboard-etc">
<h2>Installing Ubuntu on Zynq (Zedboard, etc)<a class="headerlink" href="#installing-ubuntu-on-zynq-zedboard-etc" title="Permalink to this headline">¶</a></h2>
<p>The shorthand instructions are:</p>
<blockquote>
<div><ul class="simple">
<li><p>Follow the instructions to install Ubuntu for Raspberry Pi 2 on and SD Card</p></li>
<li><p>Copy a Zedboard boot.bin to the first (VFAT) partition of the SD Card</p></li>
<li><p>Boot the Zedboard</p></li>
<li><p>Default password for user “ubuntu” is “ubuntu”</p></li>
</ul>
</div></blockquote>
<div class="section" id="toolchain">
<h3>Toolchain<a class="headerlink" href="#toolchain" title="Permalink to this headline">¶</a></h3>
<p>Zynq contains dual ARM Cortex A9 cores, which are 32-bit processors
using the ARMv7 instruction set. They are compatible with the
toolchain used for Raspberry Pi 2, which has prefix
“arm-linux-gnueabihf”.</p>
<p>The “eabi” suffix indicates the ARM extended application binary
interface standard.</p>
<p>The “hf” suffix indicates that the toolchain generates floating point
instructions rather than subroutine calls to emulate floating point,
because not all 32-bit ARM processors have floating point units.</p>
</div>
<div class="section" id="download-the-base-image">
<h3>Download the base image<a class="headerlink" href="#download-the-base-image" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Download the Ubuntu SD card image:</dt><dd><ul class="simple">
<li><p><a class="reference external" href="http://cdimage.ubuntu.com/ubuntu/releases/16.04/release/ubuntu-16.04-preinstalled-server-armhf+raspi2.img.xz">http://cdimage.ubuntu.com/ubuntu/releases/16.04/release/ubuntu-16.04-preinstalled-server-armhf+raspi2.img.xz</a></p></li>
</ul>
</dd>
<dt>Which is referenced on this page:</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://wiki.ubuntu.com/ARM/RaspberryPi">https://wiki.ubuntu.com/ARM/RaspberryPi</a></p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="formatting-and-sd-card-for-ubuntu">
<h3>Formatting and SD Card for Ubuntu<a class="headerlink" href="#formatting-and-sd-card-for-ubuntu" title="Permalink to this headline">¶</a></h3>
<p>Ubuntu 16.04 uses filesystem labels to determine which partitions to mount. There should be two partitions, with the following labels:</p>
<blockquote>
<div><ul>
<li><p>system-boot The first partition should be vfat so that the
firmware in the Zynq ROM can read it to find boot.bin. The
following command will format the partition and label it:</p>
<p>mkfs -t vfat -n system-boot /dev/sdb1</p>
</li>
<li><p>cloudimg-rootfs The second partition should be a Linux filesystem
(default ext4) containing the ubuntu installation. The following
two commands will format a partition and label it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkfs</span> <span class="o">-</span><span class="n">t</span> <span class="n">ext4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span>
<span class="n">e2label</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb2</span> <span class="n">cloudimg</span><span class="o">-</span><span class="n">rootfs</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="install-a-boot-bin-file">
<h3>Install a boot.bin file<a class="headerlink" href="#install-a-boot-bin-file" title="Permalink to this headline">¶</a></h3>
<p>See the instructions at <a class="reference external" href="https://github.com/cambridgehackers/zynq-boot">https://github.com/cambridgehackers/zynq-boot</a></p>
</div>
<div class="section" id="configuring-a-linux-kernel-for-ubuntu-16-04">
<h3>Configuring a Linux Kernel for Ubuntu 16.04<a class="headerlink" href="#configuring-a-linux-kernel-for-ubuntu-16-04" title="Permalink to this headline">¶</a></h3>
<p>I had to change the kernel configuration to suppport systemd, the init
system used in Ubuntu 16.04.</p>
<p>To be written …</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#installing-connectal-from-packages">Installing Connectal from Packages</a></li>
<li><a class="reference internal" href="#installing-connectal-from-source">Installing Connectal from Source</a></li>
<li><a class="reference internal" href="#installing-connectal-and-bluespec-on-centos-7">Installing Connectal and Bluespec on CentOS 7</a></li>
<li><a class="reference internal" href="#installing-connectal-drivers-and-pci-express-utilities">Installing Connectal Drivers and PCI Express Utilities:</a></li>
<li><a class="reference internal" href="#installing-vivado">Installing Vivado</a></li>
<li><a class="reference internal" href="#installing-ubuntu-on-zynq-zedboard-etc">Installing Ubuntu on Zynq (Zedboard, etc)</a><ul>
<li><a class="reference internal" href="#toolchain">Toolchain</a></li>
<li><a class="reference internal" href="#download-the-base-image">Download the base image</a></li>
<li><a class="reference internal" href="#formatting-and-sd-card-for-ubuntu">Formatting and SD Card for Ubuntu</a></li>
<li><a class="reference internal" href="#install-a-boot-bin-file">Install a boot.bin file</a></li>
<li><a class="reference internal" href="#configuring-a-linux-kernel-for-ubuntu-16-04">Configuring a Linux Kernel for Ubuntu 16.04</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="design/design.html"
                        title="next chapter">Connectal Design</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="bsv-pkgindex.html" title="Bsv Package Index"
             >bsvpkgs</a> |</li>
        <li class="right" >
          <a href="design/design.html" title="Connectal Design"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">connectal 20.05.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2020, Jamey Hicks, Myron King, John Ankcorn.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>