
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>1. Makefile.connectal &#8212; connectal 20.05.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/tracking.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Makefile.connectal.build" href="makefile.connectal.build.html" />
    <link rel="prev" title="Connectal Makefile Variables" href="make.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="bsv-pkgindex.html" title="Bsv Package Index"
             >bsvpkgs</a> |</li>
        <li class="right" >
          <a href="makefile.connectal.build.html" title="2. Makefile.connectal.build"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="make.html" title="Connectal Makefile Variables"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">connectal 20.05.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="make.html" accesskey="U">Connectal Makefile Variables</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="makefile-connectal">
<h1><span class="section-number">1. </span>Makefile.connectal<a class="headerlink" href="#makefile-connectal" title="Permalink to this headline">¶</a></h1>
<p>A Connectal design imports Makefile.connectal into its Makefile in order to drive the build.</p>
<p>A number of variables are used to control the build and parameters of the design.</p>
<div class="section" id="environment-variables">
<h2><span class="section-number">1.1. </span>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<dl class="envvar">
<dt id="envvar-CONNECTALDIR">
<code class="sig-name descname">CONNECTALDIR</code><a class="headerlink" href="#envvar-CONNECTALDIR" title="Permalink to this definition">¶</a></dt>
<dd><p>Points to the location where Makefile.connectal and the connectal tools are installed.</p>
</dd></dl>

</div>
<div class="section" id="make-variables-defining-the-application">
<h2><span class="section-number">1.2. </span>Make Variables Defining the Application<a class="headerlink" href="#make-variables-defining-the-application" title="Permalink to this headline">¶</a></h2>
<dl class="var">
<dt id="var-BOARD">
<code class="sig-name descname">BOARD</code><a class="headerlink" href="#var-BOARD" title="Permalink to this definition">¶</a></dt>
<dd><p>This is typically set from the suffix of the build target, e.g., make build.zedbard defines BOARD=zedboard.</p>
</dd></dl>

<dl class="var">
<dt id="var-INTERFACES">
<code class="sig-name descname">INTERFACES</code><a class="headerlink" href="#var-INTERFACES" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies for which interfaces to generate c/c++/bsv proxies and wrappers.</p>
</dd></dl>

<dl class="var">
<dt id="var-NUMBER_OF_MASTERS">
<code class="sig-name descname">NUMBER_OF_MASTERS</code><a class="headerlink" href="#var-NUMBER_OF_MASTERS" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of DMA masters in the design. Defaults to 1.</p>
</dd></dl>

<dl class="var">
<dt id="var-PIN_TYPE">
<code class="sig-name descname">PIN_TYPE</code><a class="headerlink" href="#var-PIN_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BSV interface of exported pins. Defaults to Empty. BSV type bsv:typedef::PinType is defined from PIN_TYPE.</p>
</dd></dl>

<dl class="var">
<dt id="var-PIN_TYPE_INCLUDE">
<code class="sig-name descname">PIN_TYPE_INCLUDE</code><a class="headerlink" href="#var-PIN_TYPE_INCLUDE" title="Permalink to this definition">¶</a></dt>
<dd><p>Which BSV package to import to get the declaration of PIN_TYPE.</p>
</dd></dl>

<dl class="var">
<dt id="var-PINOUT_FILE">
<code class="sig-name descname">PINOUT_FILE</code><a class="headerlink" href="#var-PINOUT_FILE" title="Permalink to this definition">¶</a></dt>
<dd><p>Which pin usage JSON files to pass to makefilegen.py as :option::<cite>–pinout</cite> options.</p>
</dd></dl>

<dl class="var">
<dt id="var-BSVFILES">
<code class="sig-name descname">BSVFILES</code><a class="headerlink" href="#var-BSVFILES" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the BSV files to scan when processing INTERFACES.</p>
</dd></dl>

<dl class="var">
<dt id="var-CPPFILES">
<code class="sig-name descname">CPPFILES</code><a class="headerlink" href="#var-CPPFILES" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the C/C++ files that implement the application.</p>
</dd></dl>

<dl class="var">
<dt id="var-CPPFILES2">
<code class="sig-name descname">CPPFILES2</code><a class="headerlink" href="#var-CPPFILES2" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the C/C++ files that implement the (optional) second executable of an application. For example, a daemon that coordinates access to the hardware.</p>
</dd></dl>

<dl class="var">
<dt id="var-PORTAL_DUMP_MAP">
<code class="sig-name descname">PORTAL_DUMP_MAP</code><a class="headerlink" href="#var-PORTAL_DUMP_MAP" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the option to provide to pcieflat to annotate PCIe traces with portal numbers and method names. Uses generatedDesignInterfaceFile.json.</p>
</dd></dl>

</div>
<div class="section" id="auto-top">
<h2><span class="section-number">1.3. </span>Auto Top<a class="headerlink" href="#auto-top" title="Permalink to this headline">¶</a></h2>
<dl class="var">
<dt id="var-S2H_INTERFACES">
<code class="sig-name descname">S2H_INTERFACES</code><a class="headerlink" href="#var-S2H_INTERFACES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="var">
<dt id="var-H2S_INTERFACES">
<code class="sig-name descname">H2S_INTERFACES</code><a class="headerlink" href="#var-H2S_INTERFACES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="var">
<dt id="var-MEM_READ_INTERFACES">
<code class="sig-name descname">MEM_READ_INTERFACES</code><a class="headerlink" href="#var-MEM_READ_INTERFACES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="var">
<dt id="var-MEM_WRITE_INTERFACES">
<code class="sig-name descname">MEM_WRITE_INTERFACES</code><a class="headerlink" href="#var-MEM_WRITE_INTERFACES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="controlling-the-build">
<h2><span class="section-number">1.4. </span>Controlling the Build<a class="headerlink" href="#controlling-the-build" title="Permalink to this headline">¶</a></h2>
<dl class="var">
<dt id="var-CONNECTALFLAGS">
<code class="sig-name descname">CONNECTALFLAGS</code><a class="headerlink" href="#var-CONNECTALFLAGS" title="Permalink to this definition">¶</a></dt>
<dd><p>Flags to pass to makefilegen.py. See <span class="xref std std-ref">_invocation_makefilegen.py</span> for its options.</p>
</dd></dl>

<dl class="var">
<dt id="var-V">
<code class="sig-name descname">V</code><a class="headerlink" href="#var-V" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls verbosity of the build. V=1 for verbose.</p>
</dd></dl>

<dl class="var">
<dt id="var-USE_BUILDCACHE">
<code class="sig-name descname">USE_BUILDCACHE</code><a class="headerlink" href="#var-USE_BUILDCACHE" title="Permalink to this definition">¶</a></dt>
<dd><p>Define USE_BUILDCACHE=1 to use buildcache. Except fpgamake seems to use buildcache anyway.</p>
</dd></dl>

<dl class="var">
<dt id="var-BUILDCACHE">
<code class="sig-name descname">BUILDCACHE</code><a class="headerlink" href="#var-BUILDCACHE" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of buildcache script.</p>
</dd></dl>

<dl class="var">
<dt id="var-BUILDCACHE_CACHEDIR">
<code class="sig-name descname">BUILDCACHE_CACHEDIR</code><a class="headerlink" href="#var-BUILDCACHE_CACHEDIR" title="Permalink to this definition">¶</a></dt>
<dd><p>To specify an alternate location for the buildcache cache files.</p>
</dd></dl>

<dl class="var">
<dt id="var-IPDIR">
<code class="sig-name descname">IPDIR</code><a class="headerlink" href="#var-IPDIR" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies into which directory to generate IP cores. This allows generated cores to be shared between designs when the FPGA part and core parameters match.</p>
</dd></dl>

<dl class="var">
<dt id="var-MAIN_CLOCK_PERIOD">
<code class="sig-name descname">MAIN_CLOCK_PERIOD</code><a class="headerlink" href="#var-MAIN_CLOCK_PERIOD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bound to the clock period, in nanoseconds, of the clock domain of mkConnectalTop.</p>
<p>Defaults to 8ns for vc707 and kc705.</p>
<p>Defaults to 10ns for zedboard.</p>
<p>Defaults to 5ns for zc706.</p>
</dd></dl>

<dl class="var">
<dt id="var-DEFAULT_DERIVED_CLOCK_PERIOD">
<code class="sig-name descname">DEFAULT_DERIVED_CLOCK_PERIOD</code><a class="headerlink" href="#var-DEFAULT_DERIVED_CLOCK_PERIOD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bound to the default clock period, in nanoseconds, of the derived
clock provided via HostInterface to mkConnectalTop. Defaults to
half the period, twice the frequency of the main clock.</p>
</dd></dl>

<dl class="var">
<dt id="var-DERIVED_CLOCK_PERIOD">
<code class="sig-name descname">DERIVED_CLOCK_PERIOD</code><a class="headerlink" href="#var-DERIVED_CLOCK_PERIOD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bound to the clock period, in nanoseconds, of the derived clock provided via HostInterface to mkConnectalTop. Defaults to DEFAULT_DERIVED_CLOCK_PERIOD.</p>
</dd></dl>

<dl class="var">
<dt id="var-BURST_LEN_SIZE">
<code class="sig-name descname">BURST_LEN_SIZE</code><a class="headerlink" href="#var-BURST_LEN_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls width of fields specifying memory request burst lengths. Defaults to 8.</p>
</dd></dl>

<dl class="var">
<dt id="var-RUNPARAM">
<code class="sig-name descname">RUNPARAM</code><a class="headerlink" href="#var-RUNPARAM" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the name or IP address of the machine on which to run the application, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">RUNPARAM</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">168.100</span> <span class="n">run</span><span class="o">.</span><span class="n">android</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="top-level-make-targets">
<h2><span class="section-number">1.5. </span>Top Level Make Targets<a class="headerlink" href="#top-level-make-targets" title="Permalink to this headline">¶</a></h2>
<dl class="target">
<dt id="target-build.%">
<code class="sig-name descname">build.%</code><a class="headerlink" href="#target-build.%" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds software and bitfile for the specified board name, e.g.,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">build</span><span class="o">.</span><span class="n">zedboard</span>
</pre></div>
</div>
</dd></dl>

<dl class="target">
<dt id="target-run.%">
<code class="sig-name descname">run.%</code><a class="headerlink" href="#target-run.%" title="Permalink to this definition">¶</a></dt>
<dd><p>Programs the FPGA and runs the application using the build for the specified board name. Uses :make:var:RUNPARAM. For example,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">RUNPARAM</span><span class="o">=</span><span class="n">sj10</span> <span class="n">run</span><span class="o">.</span><span class="n">vc707</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="intermediate-make-targets">
<h2><span class="section-number">1.6. </span>Intermediate Make Targets<a class="headerlink" href="#intermediate-make-targets" title="Permalink to this headline">¶</a></h2>
<dl class="target">
<dt id="target-verilog">
<code class="sig-name descname">verilog</code><a class="headerlink" href="#target-verilog" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the build up through generation of verilog from BSV. Requires BOARD to be defined.</p>
</dd></dl>

<dl class="target">
<dt id="target-bits">
<code class="sig-name descname">bits</code><a class="headerlink" href="#target-bits" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the FPGA bit file from the design. Requires BOARD to be defined.</p>
</dd></dl>

<dl class="target">
<dt id="target-bsim">
<code class="sig-name descname">bsim</code><a class="headerlink" href="#target-bsim" title="Permalink to this definition">¶</a></dt>
<dd><p>For BOARD=bluesim, generates the simulation executable.</p>
</dd></dl>

<dl class="target">
<dt id="target-xsim">
<code class="sig-name descname">xsim</code><a class="headerlink" href="#target-xsim" title="Permalink to this definition">¶</a></dt>
<dd><p>For BOARD=xsim, generates the simulation executable.</p>
</dd></dl>

<dl class="target">
<dt id="target-android.exe">
<code class="sig-name descname">android.exe</code><a class="headerlink" href="#target-android.exe" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the software executable for boards using Android.</p>
</dd></dl>

<dl class="target">
<dt id="target-ubuntu.exe">
<code class="sig-name descname">ubuntu.exe</code><a class="headerlink" href="#target-ubuntu.exe" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the software executable for boards using Ubunto/CentOS.</p>
</dd></dl>

<dl class="target">
<dt id="target-bsim_exe">
<code class="sig-name descname">bsim_exe</code><a class="headerlink" href="#target-bsim_exe" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the software executable for bluesim.</p>
</dd></dl>

<dl class="target">
<dt id="target-gentarget">
<code class="sig-name descname">gentarget</code><a class="headerlink" href="#target-gentarget" title="Permalink to this definition">¶</a></dt>
<dd><p>This step creates the board directory and Makefile.</p>
</dd></dl>

<dl class="target">
<dt id="target-prebuild">
<code class="sig-name descname">prebuild</code><a class="headerlink" href="#target-prebuild" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional steps needed before making verilog, etc.  Use this
target for dependences such as constraint file and IP core
generation that need to be run before the design is built. This is
a :: dependence, so you can specify it multiple times.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Makefile.connectal</a><ul>
<li><a class="reference internal" href="#environment-variables">1.1. Environment Variables</a></li>
<li><a class="reference internal" href="#make-variables-defining-the-application">1.2. Make Variables Defining the Application</a></li>
<li><a class="reference internal" href="#auto-top">1.3. Auto Top</a></li>
<li><a class="reference internal" href="#controlling-the-build">1.4. Controlling the Build</a></li>
<li><a class="reference internal" href="#top-level-make-targets">1.5. Top Level Make Targets</a></li>
<li><a class="reference internal" href="#intermediate-make-targets">1.6. Intermediate Make Targets</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="make.html"
                        title="previous chapter">Connectal Makefile Variables</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="makefile.connectal.build.html"
                        title="next chapter"><span class="section-number">2. </span>Makefile.connectal.build</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/makefile.connectal.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="bsv-pkgindex.html" title="Bsv Package Index"
             >bsvpkgs</a> |</li>
        <li class="right" >
          <a href="makefile.connectal.build.html" title="2. Makefile.connectal.build"
             >next</a> |</li>
        <li class="right" >
          <a href="make.html" title="Connectal Makefile Variables"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">connectal 20.05.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="make.html" >Connectal Makefile Variables</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2020, Jamey Hicks, Myron King, John Ankcorn.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>