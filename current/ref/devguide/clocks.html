
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Clocking Your Design &#8212; connectal 20.05.1 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/tracking.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Connectal Makefile Variables" href="../make.html" />
    <link rel="prev" title="Compiling and Running Connectal Project" href="compilingproject.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../bsv-pkgindex.html" title="Bsv Package Index"
             >bsvpkgs</a> |</li>
        <li class="right" >
          <a href="../make.html" title="Connectal Makefile Variables"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="compilingproject.html" title="Compiling and Running Connectal Project"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">connectal 20.05.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="devguide.html" accesskey="U">Connectal Developer’s Guide</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="clocking-your-design">
<span id="devguide-clocks"></span><h1>Clocking Your Design<a class="headerlink" href="#clocking-your-design" title="Permalink to this headline">¶</a></h1>
<p>Every board has a main clock, which is the clock exposed by
“exposeCurrentClock”. It has a default value, but that value can be
overriden with CONNECTALFLAG –mainclockperiod, which is an integer
specified in nanoseconds.</p>
<p>There is a second clock available, which I called “derivedClock”
because it was derived from the main clock. You can specify its clock
period with –derivedclockperiod, which is a float specified in
nanoseconds. I’m using an MMCM, which has one clock specified by a
fractional divisor.</p>
<p>On PCIe-connected boards, the main clock frequency defaults to the
PCIe user clock frequency (125MHz for gen1, 250MHz for gen2). But you
can override that, in which case your hardware is connected to PCIe
via sync FIFOs.</p>
<p>You are responsible for any synchronization required between the main
and derived clock domains.</p>
<p>There are two ways to get access to the derivedClock in your design.</p>
<div class="section" id="import-host-clocks">
<h2>IMPORT_HOST_CLOCKS<a class="headerlink" href="#import-host-clocks" title="Permalink to this headline">¶</a></h2>
<p>This is simpler, and preserves the synthesis boundary on mkConnectalTop. See examples/echoslow</p>
<p>In the Makefile</p>
<blockquote>
<div><p>CONNECTALFLAGS += -D IMPORT_HOST_CLOCKS</p>
</div></blockquote>
<p>Add “:host.derivedClock,host.derivedReset” to H2S_INTERFACES:</p>
<blockquote>
<div><p>H2S_INTERFACES = Echo:EchoIndication:host.derivedClock,host.derivedReset</p>
</div></blockquote>
<p>Or just pass in host.derivedClock and create a reset locally.</p>
<p>Look at the generated &lt;board&gt;/generatedbsv/Top.bsv to see how this changed the generated code.</p>
</div>
<div class="section" id="import-hostif">
<h2>IMPORT_HOSTIF<a class="headerlink" href="#import-hostif" title="Permalink to this headline">¶</a></h2>
<p>This option is only useful for Zynq, in order to get access to other PS7
interfaces and clocks that are not part of the standard portal
interface, e.g., I2C.</p>
<blockquote>
<div><p>CONNECTALFLAGS += -D IMPORT_HOSTIF</p>
</div></blockquote>
<p>Add “:host” to H2S_INTERFACES.</p>
<p>See tests/test_sdio1 for an example of the use of IMPORT_HOSTIF, though it has a manually written Top.bsv.</p>
</div>
<div class="section" id="setting-zynq-clock-speeds">
<h2>Setting Zynq Clock Speeds<a class="headerlink" href="#setting-zynq-clock-speeds" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="default-clock-speeds">
<h2>Default Clock Speeds<a class="headerlink" href="#default-clock-speeds" title="Permalink to this headline">¶</a></h2>
<p>The default values for –mainclockperiod and –derivedclockperiod for
the each board are in the JSON files in the boardinfo directory.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Clocking Your Design</a><ul>
<li><a class="reference internal" href="#import-host-clocks">IMPORT_HOST_CLOCKS</a></li>
<li><a class="reference internal" href="#import-hostif">IMPORT_HOSTIF</a></li>
<li><a class="reference internal" href="#setting-zynq-clock-speeds">Setting Zynq Clock Speeds</a></li>
<li><a class="reference internal" href="#default-clock-speeds">Default Clock Speeds</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="compilingproject.html"
                        title="previous chapter">Compiling and Running Connectal Project</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../make.html"
                        title="next chapter">Connectal Makefile Variables</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/devguide/clocks.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../bsv-pkgindex.html" title="Bsv Package Index"
             >bsvpkgs</a> |</li>
        <li class="right" >
          <a href="../make.html" title="Connectal Makefile Variables"
             >next</a> |</li>
        <li class="right" >
          <a href="compilingproject.html" title="Compiling and Running Connectal Project"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">connectal 20.05.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="devguide.html" >Connectal Developer’s Guide</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2020, Jamey Hicks, Myron King, John Ankcorn.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>